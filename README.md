# TidyBox — Локальный организатор папок Downloads/Desktop

**TidyBox** — это инструмент для автоматической организации файлов в папках `~/Downloads` и `~/Desktop`. Он помогает упорядочить файлы, убрать дубликаты и мусор, а также сэкономить время на ручной сортировке. Приложение работает локально, гарантируя безопасность ваших данных.

---

## **Описание проекта**

### **Функции TidyBox:**
- **Мониторинг папок:** Автоматическое отслеживание изменений в файловой системе (создание, изменение, удаление, перемещение файлов).
- **Классификация файлов:** Распределение по категориям на основе правил (тип файла, расширение, размер, имя).
- **Дедупликация:** Обнаружение и обработка дубликатов файлов.
- **История изменений:** Ведение журнала операций с возможностью Undo/Redo.
- **Web-интерфейс:** Удобный интерфейс для настройки правил, просмотра истории и управления приложением.
- **Приватность:** Все данные обрабатываются локально, без отправки в облако.

---

## **Цели проекта**

- Уменьшение беспорядка в папках `~/Downloads` и `~/Desktop` более чем на 80%.
- Ускорение поиска и доступа к файлам.
- Полная приватность данных, так как приложение работает локально.
- Возможность гибкой настройки правил для автоматической сортировки.

---

## **Стек технологий**

### **1. Агент (C++)**
- **FSEvents API (macOS):** Отслеживание изменений в папках.
- **BLAKE3:** Хэширование для обнаружения дубликатов файлов.
- **libcurl:** Отправка событий на сервер через HTTP.
- **nlohmann/json:** Работа с JSON для формирования запросов.

### **2. Сервер (Go)**
- **Chi:** Минималистичный фреймворк для REST API.
- **SQLite:** Хранение истории операций и пользовательских правил.
- **Protobuf/gRPC (после MVP):** Оптимизация взаимодействия с агентом.

### **3. Веб-UI (React)**
- **React + Vite:** Быстрая разработка интерфейса.
- **TailwindCSS:** Простая и гибкая стилизация.
- **Zustand/Redux:** Управление состоянием приложения.
- **Playwright:** Тестирование пользовательского интерфейса.

---

## **Дорожная карта (Roadmap)**

### **Общий план:**
- Проект рассчитан на 4 недели для реализации MVP и 2 дополнительные недели для оптимизации.
- Команду составляют два разработчика:
  - **Разработчик 1 (C++):** Работает над агентом.
  - **Разработчик 2 (Go + JS):** Работает над сервером и веб-интерфейсом.

---

### **Неделя 1: Планирование и настройка (подготовительный этап)**

#### **Разработчик 1 (C++):**
- Подготовка окружения (установка `CMake`, настройка компилятора).
- Изучение FSEvents API для работы с файловой системой macOS.
- Написание базового скелета агента для мониторинга папок.

#### **Разработчик 2 (Go + JS):**
- Настройка окружения для Go (установка `Go 1.22+`, настройка модулей).
- Создание структуры проекта для сервера (папки `/cmd`, `/pkg`, `/internal`).
- Настройка окружения для React (установка `Node.js`, `Vite`).
- Создание базового интерфейса с заглушками.

---

### **Неделя 2: Базовый функционал (MVP)**

#### **Разработчик 1 (C++):**
- Реализация мониторинга файловой системы (FSEvents).
- Сбор метаданных файлов (размер, MIME, дата, путь).
- Интеграция хэширования (BLAKE3) для обработки дубликатов.
- Отправка событий на сервер через HTTP (libcurl).

#### **Разработчик 2 (Go + JS):**
- Разработка API для приёма событий от агента (REST, POST `/api/v1/events`).
- Реализация базового движка правил на сервере.
- Создание мок-данных для отображения в интерфейсе.
- Веб-UI: Лента событий (мокапы).

---

### **Неделя 3: Интеграция и расширение функционала**

#### **Разработчик 1 (C++):**
- Оптимизация отправки событий батчами.
- Реализация обработки конфликтов имён (auto-rename).
- Тестирование производительности агента (до 1000 событий в минуту).

#### **Разработчик 2 (Go + JS):**
- Интеграция сервера с агентом.
- Реализация ведения истории операций (журнал в SQLite).
- Добавление Undo/Redo для операций.
- Веб-UI: Добавление функционала Undo/Redo.

---

### **Неделя 4: Полировка MVP**

#### **Разработчик 1 (C++):**
- Финальная оптимизация производительности агента.
- Локализация ошибок и обработка исключений.
- Написание автоматических тестов (gtest).

#### **Разработчик 2 (Go + JS):**
- Добавление dry-run режима в UI.
- Тестирование взаимодействия компонентов.
- Нагрузочное тестирование сервера (k6/Vegeta).
- Финализация интерфейса (стилизация, респонсивность).

---

### **Недели 5–6: Расширение (после MVP)**

#### **Обе роли:**
- Добавление новых функций:
  - Распаковка архивов с автоудалением исходников.
  - Поддержка дополнительных папок (например, `~/Documents`).
- Оптимизация взаимодействия между агентом и сервером (gRPC).
- Подготовка проекта к релизу:
  - Добавление документации.
  - Написание инструкций для установки.

---

## **Как использовать**

### **1. Установка зависимостей**
- Установите Xcode Command Line Tools:  
  ```bash
  xcode-select --install
  ```
- Установите Homebrew и необходимые инструменты:  
  ```bash
  brew install cmake go node
  ```

### **2. Сборка и запуск**
- Запустите сервер:  
  ```bash
  cd go/server
  go run ./cmd/server
  ```
- Соберите и запустите агента:  
  ```bash
  cd cpp/agent
  cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
  cmake --build build
  ./build/tidybox_agent
  ```
- Запустите Web-UI (в режиме разработки):  
  ```bash
  cd web
  npm install
  npm run dev
  ```

### **3. Использование**
- Перейдите в браузере на `http://localhost:5173`.
- Настройте правила и начните организовывать файлы.

---

## **Лицензия**

Этот проект распространяется под лицензией MIT. См. файл `LICENSE` для получения подробной информации.
